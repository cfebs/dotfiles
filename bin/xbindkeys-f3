#!/usr/bin/env bash
# macros for Mod1+5

POE_WINDOW_CLASS="steam_app_238960"
ACTIVE_WINDOW_CLASS="$(xdotool getactivewindow getwindowclassname)"

if [[ "$POE_WINDOW_CLASS" == "$ACTIVE_WINDOW_CLASS" ]]; then
	echo "Active window $ACTIVE_WINDOW_CLASS matched $POE_WINDOW_CLASS" >> /tmp/debuggg

	WIN_ID="$( xdotool search --limit 1 --all --pid $( pgrep PathOfExile.exe ) --name Path )"
	xdotool key --delay 0 --window "$WIN_ID" Return
	usleep 300000
	xdotool key --delay 0 --window "$WIN_ID" slash e x i t Return
	exit 0
fi

echo "Active window $ACTIVE_WINDOW_CLASS did not match anything, exiting" >> /tmp/debuggg
exit 1
